import{f as x,r as m,g as j,h as q,c as n,o,i as b,a as e,d as I,j as k,v as S,F as C,k as D,t as y,p as O,e as N,l as _,n as z,m as T,q as G,b as w,w as H}from"./C8Dbt3Yg.js";import{_ as V}from"./DlAUqK2U.js";const P=Symbol.for("nuxt:client-only"),K=x({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(c,{slots:t,attrs:v}){const i=m(!1);return j(()=>{i.value=!0}),q(P,!0),f=>{var d;if(i.value)return(d=t.default)==null?void 0:d.call(t);const g=t.fallback||t.placeholder;if(g)return g();const r=f.fallback||f.placeholder||"",p=f.fallbackTag||f.placeholderTag||"span";return n(p,v,r)}}}),M={NOT_START:{id:0,value:"未実施"},DOING:{id:1,value:"実行中"},COMPLETED:{id:2,value:"完了"}},Q=c=>(O("data-v-62dd63fc"),c=c(),N(),c),W={key:0},X={key:0},Y=["onClick"],Z=Q(()=>e("input",{type:"submit",value:"登録！"},null,-1)),ee={__name:"TodoInput",setup(c){const t=m(""),v=m(""),i=m(""),f=m(!1);function g(){if(t.value==""||v.value==""||i==""){f.value=!0,event.preventDefault();return}const r=JSON.parse(localStorage.getItem("items"))||[],p={id:r.length,content:t.value,limit:v.value,state:M.NOT_START,tag:i.value,onEdit:!1};r.push(p),typeof localStorage<"u"&&console.log(localStorage.getItem("items")),localStorage.setItem("items",JSON.stringify(r))}return(r,p)=>(o(),n("div",null,[f.value?(o(),n("p",W,"タスク・期限を両方入力してください。")):b("",!0),e("form",{onSubmit:g},[e("label",null,[I("やること"),k(e("input",{type:"text","onUpdate:modelValue":p[0]||(p[0]=d=>t.value=d)},null,512),[[S,t.value]])]),e("label",null,[I("期限"),k(e("input",{type:"date","onUpdate:modelValue":p[1]||(p[1]=d=>v.value=d)},null,512),[[S,v.value]])]),e("label",null,[I("タグ"),k(e("input",{type:"text","onUpdate:modelValue":p[2]||(p[2]=d=>i.value=d),onInput:p[3]||(p[3]=(...d)=>r.filteredTags&&r.filteredTags(...d))},null,544),[[S,i.value]])]),r.filteredTags?(o(),n("ul",X,[(o(!0),n(C,null,D(r.filteredTags(),d=>(o(),n("li",{key:d,onClick:$=>r.selectTag(d)},y(d),9,Y))),128))])):b("",!0),Z],32)]))}},te=V(ee,[["__scopeId","data-v-62dd63fc"]]),le=c=>(O("data-v-749688d9"),c=c(),N(),c),ne={key:0},oe={key:1,class:"modal"},ae={class:"modal-content"},se={class:"sorting"},ue=le(()=>e("tr",null,[e("th",{class:"th-id"},"ID"),e("th",{class:"th-value"},"やること"),e("th",{class:"th-limit"},"期限"),e("th",{class:"th-state"},"状態"),e("th",{class:"th-tag"},"タグ"),e("th",{class:"th-edit"},"編集"),e("th",{class:"th-delete"},"削除")],-1)),ie={key:0},de={key:0},re={key:0},ce=["value","selected"],ve={key:0},pe=["onClick"],fe=["onClick"],me=["onClick"],ge={__name:"TodoListView",setup(c){let t=m(JSON.parse(localStorage.getItem("items"))||[]),v=m(),i=m(),f=m(),g=m(),r=m(!1),p="",d=m();const $=new Date,h=m(!1);let E=m();function U(a){let l=!1;if(t.value.map(s=>{if(s.onEdit){l=!0;return}}),l){E.value="他に編集中のタスクがあります",h.value=!0;return}v.value=t.value[a].content,i.value=t.value[a].limit,f.value=t.value[a].state,g.value=t.value[a].tag,t.value[a].onEdit=!0}function J(a){if(v.value==""||i.value==""||g.value==""){E.value="タスクの内容と期限を入力してください。",h.value=!0;return}const l={id:a,content:v.value,limit:i.value,state:f.value,tag:g.value,onEdit:!1};typeof localStorage<"u"&&console.log(localStorage.getItem("items")),t.value.splice(a,1,l),localStorage.setItem("items",JSON.stringify(t.value)),h.value=!1}function L(a){r.value=!0,p=a,d.value=t.value[a].content}function B(){t.value.splice(p,1),t.value=t.value.map((a,l)=>({id:l,content:a.content,limit:a.limit,state:a.state,tag:a.tag,onEdit:a.onEdit})),typeof localStorage<"u"&&console.log(localStorage.getItem("items")),localStorage.setItem("items",JSON.stringify(t.value)),r.value=!1}function A(){r.value=!1}function F(){t.value.sort((a,l)=>a.id-l.id),typeof localStorage<"u"&&console.log(localStorage.getItem("items")),localStorage.setItem("items",JSON.stringify(t.value))}function R(){t.value.sort((a,l)=>new Date(a.limit)-new Date(l.limit)),typeof localStorage<"u"&&console.log(localStorage.getItem("items")),localStorage.setItem("items",JSON.stringify(t.value))}return(a,l)=>(o(),n("div",null,[h.value?(o(),n("p",ne,y(_(E)),1)):b("",!0),_(r)?(o(),n("div",oe,[e("div",ae,[e("p",null,"「"+y(_(d))+"」を削除してもよろしいですか？",1),e("button",{onClick:l[0]||(l[0]=s=>B())},"はい"),e("button",{onClick:l[1]||(l[1]=s=>A())},"キャンセル")])])):b("",!0),e("div",se,[I(" sort: "),e("button",{onClick:l[2]||(l[2]=s=>F())},"ID"),I(" | "),e("button",{onClick:l[3]||(l[3]=s=>R())},"期限")]),e("table",null,[ue,(o(!0),n(C,null,D(_(t),s=>(o(),n("tr",{key:s.id,class:z({red:new Date(s.limit)<_($)})},[e("td",null,y(s.id),1),e("td",null,[s.onEdit?k((o(),n("input",{key:1,"onUpdate:modelValue":l[4]||(l[4]=u=>T(v)?v.value=u:v=u),type:"text"},null,512)),[[S,_(v)]]):(o(),n("span",ie,y(s.content),1))]),e("td",null,[s.onEdit?k((o(),n("input",{key:1,"onUpdate:modelValue":l[5]||(l[5]=u=>T(i)?i.value=u:i=u),t:"",type:"date"},null,512)),[[S,_(i)]]):(o(),n("span",de,y(s.limit),1))]),e("td",null,[s.onEdit?k((o(),n("select",{key:1,"onUpdate:modelValue":l[6]||(l[6]=u=>T(f)?f.value=u:f=u)},[(o(!0),n(C,null,D(_(M),u=>(o(),n("option",{key:u.id,value:u,selected:u.id==s.state.id},y(u.value),9,ce))),128))],512)),[[G,_(f)]]):(o(),n("span",re,y(s.state.value),1))]),e("td",null,[s.onEdit?k((o(),n("input",{key:1,"onUpdate:modelValue":l[7]||(l[7]=u=>T(g)?g.value=u:g=u),type:"text"},null,512)),[[S,_(g)]]):(o(),n("span",ve,y(s.tag),1))]),e("td",null,[s.onEdit?(o(),n("button",{key:1,onClick:u=>J(s.id)},"完了",8,fe)):(o(),n("button",{key:0,onClick:u=>U(s.id)},"編集",8,pe))]),e("td",null,[e("button",{onClick:u=>L(s.id)},"削除",8,me)])],2))),128))])]))}},_e=V(ge,[["__scopeId","data-v-749688d9"]]),ye=c=>(O("data-v-6ab82a32"),c=c(),N(),c),ke=ye(()=>e("h1",null,"To Do Task Manager",-1)),Se=x({__name:"index",setup(c){return(t,v)=>{const i=K;return o(),n(C,null,[ke,e("section",null,[e("div",null,[w(i,null,{default:H(()=>[w(te),w(_e)]),_:1})])])],64)}}}),Te=V(Se,[["__scopeId","data-v-6ab82a32"]]);export{Te as default};
